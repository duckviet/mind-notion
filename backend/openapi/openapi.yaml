openapi: 3.0.3
info:
  title: Modular JWT Authenticated API
  version: 1.0.0
  description: An example API using JWT imported from a separate file.

servers:
  - url: http://localhost:8080/api/v1

# Áp dụng scheme 'JWTAuth' cho toàn bộ API.
security:
  - BearerAuth: []

paths:
  # $ref: "./paths/jwt-auth.yaml#/paths"
  /auth/login:
    $ref: "./paths/jwt-auth/login.yaml"
  /auth/register:
    $ref: "./paths/jwt-auth/register.yaml"
  /auth/logout:
    $ref: "./paths/jwt-auth/logout.yaml"
  /auth/check:
    $ref: "./paths/jwt-auth/check.yaml"
  /auth/refresh-token:
    $ref: "./paths/jwt-auth/refresh-token.yaml"
  # User Management
  /user/me:
    $ref: "./paths/user/me.yaml"
  /user/update:
    $ref: "./paths/user/update.yaml"
  /user/delete:
    $ref: "./paths/user/delete.yaml"

  # Note Management
  /notes:
    $ref: "./paths/note/create.yaml"
  /notes/list:
    $ref: "./paths/note/list.yaml"
  /notes/{note_id}:
    $ref: "./paths/note/get.yaml"
  /notes/{note_id}/update:
    $ref: "./paths/note/update.yaml"
  /notes/{note_id}/delete:
    $ref: "./paths/note/delete.yaml"
  /notes/{note_id}/public-edit:
    $ref: "./paths/note/public-edit.yaml"
  /notes/{note_id}/public-edit/rotate:
    $ref: "./paths/note/public-edit-rotate.yaml"
  /notes/{note_id}/tom:
    $ref: "./paths/note/update-tom.yaml"
  /notes/list-tom:
    $ref: "./paths/note/list-tom.yaml"

  # Public Note Access (no auth required)
  /public/notes/{note_id}:
    $ref: "./paths/note/get-public.yaml"
  /public/notes/{note_id}/snapshot:
    $ref: "./paths/note/snapshot.yaml"

  # Collaboration
  /public/collab/token:
    $ref: "./paths/collab/token.yaml"

  # Comment Management
  /notes/{note_id}/comments:
    $ref: "./paths/comment/create.yaml"
  /notes/{note_id}/comments/list:
    $ref: "./paths/comment/list.yaml"
  /notes/{note_id}/comments/{comment_id}:
    $ref: "./paths/comment/update.yaml"
  /notes/{note_id}/comments/{comment_id}/delete:
    $ref: "./paths/comment/delete.yaml"

  # Folder Management
  /folders/create:
    $ref: "./paths/folder/create.yaml"
  /folders/list:
    $ref: "./paths/folder/list.yaml"
  /folders/{id}:
    $ref: "./paths/folder/get.yaml"
  /folders/{id}/update:
    $ref: "./paths/folder/update.yaml"
  /folders/{id}/delete:
    $ref: "./paths/folder/delete.yaml"
  /folders/{id}/add-note:
    $ref: "./paths/folder/add-note.yaml"

  # Event Management
  /events:
    $ref: "./paths/event/create.yaml"
  /events/list:
    $ref: "./paths/event/list.yaml"
  /events/{id}:
    $ref: "./paths/event/get.yaml"
  /events/{id}/update:
    $ref: "./paths/event/update.yaml"
  /events/{id}/delete:
    $ref: "./paths/event/delete.yaml"
  /events/range:
    $ref: "./paths/event/list-by-range.yaml"

  # Template Management
  /templates:
    $ref: "./paths/template/create.yaml"
  /templates/list:
    $ref: "./paths/template/list.yaml"
  /templates/{id}:
    $ref: "./paths/template/get.yaml"
  /templates/{id}/update:
    $ref: "./paths/template/update.yaml"
  /templates/{id}/delete:
    $ref: "./paths/template/delete.yaml"

  # Media Management
  /media/upload:
    $ref: "./paths/media/upload.yaml"

# Phần components giờ đây chỉ chứa các tham chiếu
components:
  securitySchemes:
    # Key 'BearerAuth' sẽ có giá trị được load từ file bên ngoài
    BearerAuth:
      $ref: "./components/securitySchemes/JWTAuth.yaml"
    EditToken:
      $ref: "./components/securitySchemes/EditToken.yaml"

  schemas:
    $ref: "./components/schemas/_index.yaml"

  # (Bonus) Import các response tái sử dụng
  responses:
    $ref: "./components/responses/_index.yaml"

  parameters:
    $ref: "./components/parameters/_index.yaml"
